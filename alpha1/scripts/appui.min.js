var isdisabled=false;function setupUI(){$("#subnav2").css("z-index",-10000);$("#subnav").css("z-index",10000);$("#subnav").css("visibility","visible");$("#subnav2").css("visibility","hidden");$("#editorBox").bind("keyup",onKeyUp);$("#urlinput").bind("blur",onURLEntered);$("#urlinput").bind("keyup",onURLEntered);$("#editorBox").bind("focusout",onFocusOut)}function onFocusOut(event){var val=$("#editorBox").val();if(val!=""){$(editedobject).text($("#editorBox").val())}hideEditorBox();resetEditedObject()}function setupKnobs(){$("#knobit1").knob({"change":function(e){skewx=e;$(editedobject).css("-webkit-transform","rotate("+rot+"deg) skew("+skewx+"deg, "+skewy+"deg)");$(editedobject).attr("data-skewx",skewx);$(editedobject).attr("data-skewy",skewy)}});$("#knobit2").knob({"change":function(e){skewy=e $(editedobject).css("-webkit-transform","rotate("+rot+"deg) skew("+skewx+"deg, "+skewy+"deg)");$(editedobject).attr("data-skewx",skewx);$(editedobject).attr("data-skewy",skewy)}});$("#slideknob").knob({"change":function(e){currentsliderotation=e;selectedorchslide.attr("data-rotation",e);doExport();selectedorchslide.css("-webkit-transform","rotate("+e+"deg)")}});$("#depthrange").bind("change",onDepthChange);$("#scalerange").bind("change",onScaleChange)}function onDepthChange(event){var depth=parseInt(event.target.value)*-1;selectedorchslide.attr("data-z",depth);doExport()}function onScaleChange(event){var scale=parseInt(event.target.value);selectedorchslide.attr("data-scale",scale);doExport()}function setupColorPicker(color){$('#colorSelector').ColorPicker({color:'#0000ff',onShow:function(colpkr){if(!isdisabled){$(colpkr).fadeIn(500)}return false},onHide:function(colpkr){$(colpkr).fadeOut(500);return false},onChange:function(hsb,hex,rgb){if(!isdisabled){colorboxopen=true;currentAddObject="";$("#colorSelector").css('backgroundColor','#'+hex);$(editedobject).attr("data-selected-color","#"+hex);$(editedobject).css("color","#"+hex)}}})}function setFontStyle(value){var dropdownlabel="";fontStyle=value;if(fontStyle=="jumbo"){dropdownlabel="Very Large"}else if(fontStyle=="largeheader"){dropdownlabel="Large"}else if(fontStyle=="mediumheader"){dropdownlabel="Medium"}else if(fontStyle=="smallheader"){dropdownlabel="Small"}$(editedobject).attr("data-font-size",value);$("#fontstyledropdown").html(dropdownlabel+'<b class="caret">');$(editedobject).attr("class","ui-draggable slideobject itemselected "+value)}function setFont(font){selectedFont=font;$(editedobject).attr("data-font-face",font)$("#fontdropdown").html(selectedFont+'<b class="caret">');if(editedobject!=""){$(editedobject).css("font-family",selectedFont)}}function toggleBold(){isBold=!isBold;if(isBold){$("#boldButton").addClass("menuButtonSelected");$(editedobject).css("font-weight","normal")}else{$("#boldButton").removeClass("menuButtonSelected");$(editedobject).css("font-weight","bold")}}function toggleItalic(){isItalic=!isItalic;if(isItalic){$("#italicsButton").addClass("menuButtonSelected");$(editedobject).css("font-style","italic")}else{$("#italicsButton").removeClass("menuButtonSelected");$(editedobject).css("font-style","normal")}}function deleteObject(){if(editedobject!=""){var id=$(editedobject).attr("id");var index=id.split("____object")[1];removeItemFromObjectMap(index);$(editedobject).remove();$("#deleteBtn").css("left",-30000)}}function removeItemFromObjectMap(index){for(var i=0;i<objectmap.length;i++){if(objectmap[i].index==index){objectmap.splice(i,1)}}}function deleteSlide(){recount=1;if($(currentSelected).attr("id")!=undefined){var index=$(currentSelected).attr("id").split("slidethumb")[1];$("#orch_slide____slide"+index).remove();removeChildObjects($(addTarget))$(currentSelected).remove();$(addTarget).remove();doReparenting(index)}else{}}function removeChildObjects(parent){var len=parent[0].childNodes.length;for(var i=0;i<objectmap.length;i++){for(var j=0;j<len;j++){var toremove=(parent[0].childNodes[j].id);var rm=toremove.split("____object")[1];if(objectmap[i].index==rm){objectmap.splice(i,1)}}}}function doReparenting(index){for(var i=0;i<slidemap.length;i++){if(slidemap[i].index==index){slidemap.splice(i,1)}}slidecounter--;for(var j=0;j<slidemap.length;j++){var item=$("#slide_number_sliderthumb"+slidemap[j].index);$("slide_number_sliderthumb"+slidemap[j].index).text(j)}}function hideEditedObject(){}function hideEditorBox(){$("#editorBox").css("left",-3000);$("#editorBox").css("top",-3000);$("#editorBox").val("");$(editedobject).css("opacity",1)}function resetEditedObject(){$(editedobject).css("left",editedobjectx);$(editedobject).css("top",editedobjecty);currentAddObject=""}function hidePresentationView(){isOrchestration=true;$("#orchestrationarea").css("left",40);$("#drawingboard").css("left",-20000)$("#leftarrow").css("visibility","visible");$("#rightarrow").css("visibility","visible");$("#slidethumbnailholder").css("visibility","hidden")$("#subnav").css("z-index",-10000)$("#subnav2").css("z-index",30000)$("#subnav").css("visibility","hidden");$("#subnav2").css("visibility","visible");$("#deleteBtn").css("left",-10000)}function showPresentationView(){isOrchestration=false;togglePaginator(false);$("#drawingboard").css("left",150)$("#slidethumbnailholder").css("visibility","visible")$("#leftarrow").css("visibility","hidden");$("#rightarrow").css("visibility","hidden");$("#orchestrationarea").css("left",-10000);$("#subnav").css("z-index",30000);$("#subnav2").css("z-index",-10000);$("#subnav").css("visibility","visible");$("#subnav2").css("visibility","hidden")}function hideInactiveSlides(){for(var i=0;i<slidemap.length;i++){var s="#____slide"+slidemap[i].index;if(s!=addTarget){$(s).css("opacity",0);$(s).css("left",-10000)}else{$(s).css("opacity",1);$(s).css("left",0)}}}function showOpenDialog(){$("#openModal").modal();showSavedPresentations()}function setObjectType(type){addObjectFlag=true;currentAddObject=type;if(type=="pic"){picwindowopen=true;$("#myModal").modal()}}function positionDeleteButton(){if(itemSelected){$("#deleteBtn").css("opacity",1)var x=parseInt($(editedobject).css("left").split("px")[0])-15;var y=parseInt($(editedobject).css("top").split("px")[0])-15;$("#deleteBtn").css("left",x);$("#deleteBtn").css("top",y)}else{editedobject=""}}function toggleSelect(event){oldpresoselected=!oldpresoselected;currentSelectedProject="#"+event.currentTarget}function onSavedPresoLinkClicked(event){var projectdetails=getItem(event.target.id);currentSaveName=event.target.id;$("#openModal").modal("hide");restoreProject(projectdetails)}function showSavedPresentations(){$("#savedpresolist").html("");if(savedPresentations.length>0){for(var i=0;i<savedPresentations.length;i++){var str=presotemplate.split("!PRESOTITLE!").join("&nbsp;&nbsp;"+savedPresentations[i].split("_").join(" "));str=str.split("!LINKID!").join(savedPresentations[i]);str=str.split("!PRESOID!").join(savedPresentations[i]);$("#savedpresolist").append(str);$("#"+savedPresentations[i]).bind("dblclick",onSavedPresoLinkClicked)}}}function toggleToolbarControls(bool){if(!bool){$("#knobit1").attr("readonly","readonly");$("#knobit2").attr("readonly","readonly");$("#colorSelector").fadeTo('slow',.3);$("#fontstyledropdown").fadeTo("slow",.5);$("#fontdropdown").fadeTo("slow",.5);$("#mask").css("visibility","visible")isdisabled=true}else{$("#knobit1").removeAttr("readonly");$("#knobit2").removeAttr("readonly");$("#colorSelector").fadeTo('slow',1)$("#fontstyledropdown").fadeTo("slow",1);$("#fontdropdown").fadeTo("slow",1)$("#mask").css("visibility","hidden")isdisabled=false}}